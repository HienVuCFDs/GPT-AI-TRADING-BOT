{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}Admin - Trang ch·ªß{% endblock %}

{% block content %}
<style>
    .admin-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .admin-card {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        padding: 20px;
        transition: all 0.2s;
    }
    
    .admin-card:hover {
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transform: translateY(-2px);
    }
    
    .admin-card-icon {
        width: 48px;
        height: 48px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        margin-bottom: 15px;
    }
    
    .admin-card h3 {
        font-size: 16px;
        font-weight: 600;
        color: #1e293b;
        margin: 0 0 8px;
    }
    
    .admin-card p {
        font-size: 13px;
        color: #64748b;
        margin: 0 0 15px;
    }
    
    .admin-card-actions {
        display: flex;
        gap: 10px;
    }
    
    .admin-card-actions a {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 500;
        text-decoration: none;
    }
    
    .btn-view {
        background: #f1f5f9;
        color: #475569;
    }
    
    .btn-view:hover {
        background: #e2e8f0;
        color: #1e293b;
    }
    
    .btn-add {
        background: #10b981;
        color: #fff;
    }
    
    .btn-add:hover {
        background: #059669;
        color: #fff;
    }
    
    .quick-actions {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }
    
    .quick-action {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 20px;
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        color: #fff;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.2s;
    }
    
    .quick-action:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
        color: #fff;
    }
    
    .quick-action.green {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    }
    
    .quick-action.green:hover {
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
    }
    
    .section-title {
        font-size: 18px;
        font-weight: 700;
        color: #1e293b;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
</style>

<!-- Quick Actions -->
<div class="quick-actions">
    <a href="{% url 'dashboard' %}" class="quick-action green">
        <i class="bi bi-speedometer2"></i>
        M·ªü B·∫£ng ƒêi·ªÅu Khi·ªÉn
    </a>
    <a href="{% url 'admin:auth_user_add' %}" class="quick-action">
        <i class="bi bi-person-plus"></i>
        Th√™m User M·ªõi
    </a>
    <a href="{% url 'admin:users_license_add' %}" class="quick-action">
        <i class="bi bi-key"></i>
        T·∫°o License M·ªõi
    </a>
</div>

<!-- Main Management -->
<h2 class="section-title"><i class="bi bi-grid-3x3-gap"></i> Qu·∫£n l√Ω ch√≠nh</h2>
<div class="admin-grid">
    <!-- Users -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #dbeafe; color: #2563eb;">
            <i class="bi bi-people"></i>
        </div>
        <h3>üë§ Ng∆∞·ªùi d√πng</h3>
        <p>Qu·∫£n l√Ω t√†i kho·∫£n ng∆∞·ªùi d√πng, ph√¢n quy·ªÅn v√† th√¥ng tin c√° nh√¢n</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:auth_user_changelist' %}" class="btn-view">Xem danh s√°ch</a>
            <a href="{% url 'admin:auth_user_add' %}" class="btn-add">+ Th√™m m·ªõi</a>
        </div>
    </div>
    
    <!-- Licenses -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #fef3c7; color: #d97706;">
            <i class="bi bi-key"></i>
        </div>
        <h3>üîë License</h3>
        <p>Qu·∫£n l√Ω license, k√≠ch ho·∫°t, gia h·∫°n v√† theo d√µi tr·∫°ng th√°i</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:users_license_changelist' %}" class="btn-view">Xem danh s√°ch</a>
            <a href="{% url 'admin:users_license_add' %}" class="btn-add">+ Th√™m m·ªõi</a>
        </div>
    </div>
    
    <!-- Devices -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #d1fae5; color: #059669;">
            <i class="bi bi-pc-display"></i>
        </div>
        <h3>üíª Thi·∫øt b·ªã</h3>
        <p>Theo d√µi thi·∫øt b·ªã ƒë√£ k√≠ch ho·∫°t, tr·∫°ng th√°i online/offline</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:users_deviceactivation_changelist' %}" class="btn-view">Xem danh s√°ch</a>
        </div>
    </div>
    
    <!-- Activity Logs -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #fce7f3; color: #db2777;">
            <i class="bi bi-activity"></i>
        </div>
        <h3>üìä L·ªãch s·ª≠ ho·∫°t ƒë·ªông</h3>
        <p>Theo d√µi ƒëƒÉng nh·∫≠p, heartbeat v√† c√°c s·ª± ki·ªán h·ªá th·ªëng</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:users_usagelog_changelist' %}" class="btn-view">Xem l·ªãch s·ª≠</a>
        </div>
    </div>
</div>

<!-- Settings -->
<h2 class="section-title"><i class="bi bi-gear"></i> C√†i ƒë·∫∑t</h2>
<div class="admin-grid">
    <!-- Subscription Plans -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #e0e7ff; color: #4f46e5;">
            <i class="bi bi-box"></i>
        </div>
        <h3>üì¶ G√≥i ƒëƒÉng k√Ω</h3>
        <p>Qu·∫£n l√Ω c√°c g√≥i license: Trial, Monthly, Yearly...</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:users_subscriptionplan_changelist' %}" class="btn-view">Xem danh s√°ch</a>
            <a href="{% url 'admin:users_subscriptionplan_add' %}" class="btn-add">+ Th√™m m·ªõi</a>
        </div>
    </div>
    
    <!-- User Profiles -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #ccfbf1; color: #0d9488;">
            <i class="bi bi-person-badge"></i>
        </div>
        <h3>üìù H·ªì s∆° ng∆∞·ªùi d√πng</h3>
        <p>Th√¥ng tin b·ªï sung: s·ªë ƒëi·ªán tho·∫°i, ƒë·ªãa ch·ªâ...</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:users_userprofile_changelist' %}" class="btn-view">Xem danh s√°ch</a>
        </div>
    </div>
    
    <!-- Groups -->
    <div class="admin-card">
        <div class="admin-card-icon" style="background: #fef9c3; color: #ca8a04;">
            <i class="bi bi-people"></i>
        </div>
        <h3>üë• Nh√≥m quy·ªÅn</h3>
        <p>Ph√¢n quy·ªÅn truy c·∫≠p cho c√°c nh√≥m ng∆∞·ªùi d√πng</p>
        <div class="admin-card-actions">
            <a href="{% url 'admin:auth_group_changelist' %}" class="btn-view">Xem danh s√°ch</a>
            <a href="{% url 'admin:auth_group_add' %}" class="btn-add">+ Th√™m m·ªõi</a>
        </div>
    </div>
</div>
{% endblock %}

{% block sidebar %}
<div id="content-related">
    <div class="module">
        <h2><i class="bi bi-clock-history"></i> Thao t√°c g·∫ßn ƒë√¢y</h2>
        {% load log %}
        {% get_admin_log 8 as admin_log for_user user %}
        {% if not admin_log %}
        <p style="padding: 15px; color: #64748b; text-align: center;">Ch∆∞a c√≥ thao t√°c n√†o</p>
        {% else %}
        <ul class="actionlist">
        {% for entry in admin_log %}
        <li class="{% if entry.is_addition %}addlink{% endif %}{% if entry.is_change %}changelink{% endif %}{% if entry.is_deletion %}deletelink{% endif %}">
            {% if entry.is_deletion or not entry.get_admin_url %}
                {{ entry.object_repr }}
            {% else %}
                <a href="{{ entry.get_admin_url }}">{{ entry.object_repr|truncatechars:25 }}</a>
            {% endif %}
            <br>
            <span class="mini quiet">
                {% if entry.is_addition %}ƒê√£ th√™m{% endif %}
                {% if entry.is_change %}ƒê√£ s·ª≠a{% endif %}
                {% if entry.is_deletion %}ƒê√£ x√≥a{% endif %}
            </span>
        </li>
        {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endblock %}
